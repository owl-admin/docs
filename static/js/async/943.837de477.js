"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["943"],{9436:function(e,a,n){n.r(a),n.d(a,{default:function(){return l}});var d=n(2676),i=n(453);function r(e){let a=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",pre:"pre",code:"code",del:"del"},(0,i.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.h1,{id:"助手函数",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#助手函数",children:"#"}),"助手函数"]}),"\n",(0,d.jsxs)(a.h2,{id:"amis",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#amis",children:"#"}),"amis"]}),"\n",(0,d.jsx)(a.p,{children:"调用 Component 类, 实现万能组件"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"amis('page')->title('title')->body('content');\n// 等效于\nPage::make()->title('title')->body('content');\n// 等效于\namis()->Page()->title('title')->body('content');\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"amismake",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#amismake",children:"#"}),(0,d.jsx)(a.del,{children:"amisMake"})]}),"\n",(0,d.jsx)(a.p,{children:"解决 复杂页面 use 语句过多 的问题"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"amisMake()->TextControl()->name('name')->label('label');\n// 等效于\nTextControl::make()->name('name')->label('label');\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_encode",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_encode",children:"#"}),"admin_encode"]}),"\n",(0,d.jsx)(a.p,{children:"加密字符串"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_encode(string $str):string\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_decode",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_decode",children:"#"}),"admin_decode"]}),"\n",(0,d.jsx)(a.p,{children:"解密字符串"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_decode(string $str):string\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"array2tree",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#array2tree",children:"#"}),"array2tree"]}),"\n",(0,d.jsxs)(a.p,{children:["递归生成树状数据，确保数组中包含键 ",(0,d.jsx)(a.code,{children:"parent_id"})]}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"array2tree($arr):array\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_url",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_url",children:"#"}),"admin_url"]}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_url($path = null, $needPrefix = false):string\n\n// eg:\nadmin_url('user');       // /user\nadmin_url('user', true); // /admin-api/user\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"table_columns",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#table_columns",children:"#"}),"table_columns"]}),"\n",(0,d.jsx)(a.p,{children:"获取数据表的字段"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"table_columns(string $table):array\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_resource_full_path",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_resource_full_path",children:"#"}),"admin_resource_full_path"]}),"\n",(0,d.jsx)(a.p,{children:"返回资源完整路径"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_resource_full_path(string $path):string\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_path",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_path",children:"#"}),"admin_path"]}),"\n",(0,d.jsx)(a.p,{children:"返回 admin 目录路径"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_path(string $path = null):string\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"file_upload_handle",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#file_upload_handle",children:"#"}),"file_upload_handle"]}),"\n",(0,d.jsx)(a.p,{children:"处理文件上传回显问题, set 时去除域名, get 加上域名"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"file_upload_handle():\\Illuminate\\Database\\Eloquent\\Casts\\Attribute\n// 多文件\nfile_upload_handle_multi():\\Illuminate\\Database\\Eloquent\\Casts\\Attribute\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"is_json",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#is_json",children:"#"}),"is_json"]}),"\n",(0,d.jsx)(a.p,{children:"判断是否是 json 字符串"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"is_json(string $str):bool\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"settings",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#settings",children:"#"}),"settings"]}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"settings():\\Slowlyo\\OwlAdmin\\Services\\AdminSettingService;\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_user",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_user",children:"#"}),"admin_user"]}),"\n",(0,d.jsx)(a.p,{children:"获取当前登录用户信息"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"$userId = admin_user()->id;\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_abort--admin_abort_if",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_abort--admin_abort_if",children:"#"}),"admin_abort & admin_abort_if"]}),"\n",(0,d.jsx)(a.p,{children:"抛出异常, 并返回错误信息"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_abort($message = '', $data = [], $doNotDisplayToast = 0);\n// 如果条件成了, 则抛出异常\nadmin_abort_if($flag, $message = '', $data = [], $doNotDisplayToast = 0);\n"})}),"\n",(0,d.jsxs)(a.h2,{id:"admin_pipeline",children:[(0,d.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#admin_pipeline",children:"#"}),"admin_pipeline"]}),"\n",(0,d.jsx)(a.p,{children:"为了适配 laravel 9 , 框架内封装了 pipeline 函数"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-php",meta:"",children:"admin_pipeline($passable)->through($pipes)->then(fn($i) => $i);\n"})})]})}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}=Object.assign({},(0,i.ah)(),e.components);return a?(0,d.jsx)(a,Object.assign({},e,{children:(0,d.jsx)(r,e)})):r(e)}let l=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["guide%2Fbasic%2Fhelper.md"]={toc:[{id:"amis",text:"amis",depth:2},{id:"",text:"",depth:2},{id:"admin_encode",text:"admin_encode",depth:2},{id:"admin_decode",text:"admin_decode",depth:2},{id:"array2tree",text:"array2tree",depth:2},{id:"admin_url",text:"admin_url",depth:2},{id:"table_columns",text:"table_columns",depth:2},{id:"admin_resource_full_path",text:"admin_resource_full_path",depth:2},{id:"admin_path",text:"admin_path",depth:2},{id:"file_upload_handle",text:"file_upload_handle",depth:2},{id:"is_json",text:"is_json",depth:2},{id:"settings",text:"settings",depth:2},{id:"admin_user",text:"admin_user",depth:2},{id:"admin_abort--admin_abort_if",text:"admin_abort & admin_abort_if",depth:2},{id:"admin_pipeline",text:"admin_pipeline",depth:2}],title:"助手函数",frontmatter:{}}}}]);