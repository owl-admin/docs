"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["7032"],{6244:function(n,e,s){s.r(e),s.d(e,{default:function(){return l}});var r=s(2676),i=s(453);function d(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",code:"code",ol:"ol",li:"li",strong:"strong",ul:"ul",pre:"pre"},(0,i.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"动态页面",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#动态页面",children:"#"}),"动态页面"]}),"\n",(0,r.jsx)(e.p,{children:"动态页面是 Owl Admin 提供的一种灵活的页面管理机制，允许开发者通过可视化编辑器创建和管理页面内容，无需编写代码即可构建复杂的管理界面。"}),"\n",(0,r.jsxs)(e.h2,{id:"核心概念",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#核心概念",children:"#"}),"核心概念"]}),"\n",(0,r.jsxs)(e.h3,{id:"页面标识-sign",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#页面标识-sign",children:"#"}),"页面标识 (Sign)"]}),"\n",(0,r.jsxs)(e.p,{children:["每个动态页面都有一个唯一的标识符，用于在系统中识别和调用该页面。页面标识必须是唯一的，通常使用有意义的英文字符串，如 ",(0,r.jsx)(e.code,{children:"dashboard"}),"、",(0,r.jsx)(e.code,{children:"user_profile"})," 等。"]}),"\n",(0,r.jsxs)(e.h3,{id:"页面结构-schema",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#页面结构-schema",children:"#"}),"页面结构 (Schema)"]}),"\n",(0,r.jsx)(e.p,{children:"页面的具体内容以 JSON Schema 格式存储，基于 amis 框架的组件规范，支持丰富的组件类型和交互功能。"}),"\n",(0,r.jsxs)(e.h2,{id:"创建动态页面",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#创建动态页面",children:"#"}),"创建动态页面"]}),"\n",(0,r.jsxs)(e.h3,{id:"1-通过开发工具创建",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#1-通过开发工具创建",children:"#"}),"1. 通过开发工具创建"]}),"\n",(0,r.jsx)(e.p,{children:"在管理后台的开发工具中，可以通过可视化界面创建动态页面："}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["进入 ",(0,r.jsx)(e.strong,{children:"开发工具"})," → ",(0,r.jsx)(e.strong,{children:"页面管理"})]}),"\n",(0,r.jsxs)(e.li,{children:["点击 ",(0,r.jsx)(e.strong,{children:"新增"})," 按钮"]}),"\n",(0,r.jsxs)(e.li,{children:["填写页面信息：","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"页面标题"}),"：页面的显示名称"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"页面标识"}),"：页面的唯一标识符"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"页面内容"}),"：使用可视化编辑器设计页面结构"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"2-页面编辑器功能",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#2-页面编辑器功能",children:"#"}),"2. 页面编辑器功能"]}),"\n",(0,r.jsx)(e.p,{children:"内置的页面编辑器提供了丰富的功能："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"拖拽式组件布局"}),"\n",(0,r.jsx)(e.li,{children:"实时预览效果"}),"\n",(0,r.jsx)(e.li,{children:"组件属性配置"}),"\n",(0,r.jsx)(e.li,{children:"数据绑定设置"}),"\n",(0,r.jsx)(e.li,{children:"交互逻辑定义"}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"使用动态页面",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#使用动态页面",children:"#"}),"使用动态页面"]}),"\n",(0,r.jsxs)(e.h3,{id:"方法一通过admin_pages-函数调用",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#方法一通过admin_pages-函数调用",children:"#"}),"方法一：通过",(0,r.jsx)(e.code,{children:"admin_pages()"})," 函数调用"]}),"\n",(0,r.jsxs)(e.p,{children:["在控制器中使用 ",(0,r.jsx)(e.code,{children:"admin_pages()"})," 函数获取页面内容："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-php",meta:"",children:"<?php\n\nnamespace App\\Admin\\Controllers;\n\nuse Slowlyo\\OwlAdmin\\Controllers\\AdminController;\n\nclass DashboardController extends AdminController\n{\n    public function index()\n    {\n        // 通过页面标识获取页面结构\n        $schema = admin_pages('dashboard');\n\n        // 返回页面数据\n        return $this->response()->success($schema);\n    }\n\n    public function userProfile()\n    {\n        // 获取用户资料页面\n        $schema = admin_pages('user_profile');\n\n        // 可以在返回前对数据进行处理\n        if (!$schema) {\n            return $this->response()->fail('页面不存在');\n        }\n\n        return $this->response()->success($schema);\n    }\n}\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"方法二直接绑定到菜单",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#方法二直接绑定到菜单",children:"#"}),"方法二：直接绑定到菜单"]}),"\n",(0,r.jsx)(e.p,{children:"这是最简单的使用方式，无需编写任何代码："}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"创建菜单项"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["进入 ",(0,r.jsx)(e.strong,{children:"系统管理"})," → ",(0,r.jsx)(e.strong,{children:"菜单管理"})]}),"\n",(0,r.jsxs)(e.li,{children:["点击 ",(0,r.jsx)(e.strong,{children:"新增"})," 按钮"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"配置菜单信息"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"菜单标题"}),"：显示在导航中的名称"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"菜单图标"}),"：选择合适的图标"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"菜单类型"}),"：选择 ",(0,r.jsx)(e.strong,{children:"页面"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"关联页面"}),"：选择已创建的动态页面"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"保存并生效"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"保存后，点击该菜单项将自动显示对应的页面内容"}),"\n",(0,r.jsx)(e.li,{children:"系统会自动处理页面加载和渲染"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"方法三在现有页面中嵌入",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#方法三在现有页面中嵌入",children:"#"}),"方法三：在现有页面中嵌入"]}),"\n",(0,r.jsx)(e.p,{children:"可以在现有的 amis 页面中嵌入动态页面："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-php",meta:"",children:"public function complexPage()\n{\n    $page = amis()->Page()->body([\n        amis()->Alert()->body('这是一个复合页面'),\n\n        // 嵌入动态页面\n        admin_pages('embedded_content'),\n\n        amis()->Divider(),\n        amis()->Button()->label('操作按钮')->level('primary'),\n    ]);\n\n    return $this->response()->success($page);\n}\n"})}),"\n",(0,r.jsxs)(e.h2,{id:"高级特性",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#高级特性",children:"#"}),"高级特性"]}),"\n",(0,r.jsxs)(e.h3,{id:"缓存机制",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#缓存机制",children:"#"}),"缓存机制"]}),"\n",(0,r.jsx)(e.p,{children:"动态页面内容会被自动缓存，提高页面加载性能："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"首次访问时从数据库读取"}),"\n",(0,r.jsx)(e.li,{children:"后续访问直接从缓存获取"}),"\n",(0,r.jsx)(e.li,{children:"页面更新时自动清除相关缓存"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"权限控制",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#权限控制",children:"#"}),"权限控制"]}),"\n",(0,r.jsx)(e.p,{children:"动态页面支持完整的权限控制："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"通过菜单权限控制页面访问"}),"\n",(0,r.jsx)(e.li,{children:"支持角色和用户级别的权限设置"}),"\n",(0,r.jsx)(e.li,{children:"可以在页面内部设置组件级权限"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"数据绑定",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据绑定",children:"#"}),"数据绑定"]}),"\n",(0,r.jsx)(e.p,{children:"页面可以绑定动态数据源："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-php",meta:"",children:"public function dataPage()\n{\n    // 获取基础页面结构\n    $schema = admin_pages('data_template');\n\n    // 注入动态数据\n    $schema['data'] = [\n        'user_count' => User::count(),\n        'order_total' => Order::sum('amount'),\n        'recent_activities' => Activity::recent()->limit(10)->get(),\n    ];\n\n    return $this->response()->success($schema);\n}\n"})}),"\n",(0,r.jsxs)(e.h2,{id:"最佳实践",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#最佳实践",children:"#"}),"最佳实践"]}),"\n",(0,r.jsxs)(e.h3,{id:"1-命名规范",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#1-命名规范",children:"#"}),"1. 命名规范"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"页面标识使用下划线分隔的小写字母"}),"\n",(0,r.jsxs)(e.li,{children:["标识应该具有描述性，如 ",(0,r.jsx)(e.code,{children:"user_dashboard"}),"、",(0,r.jsx)(e.code,{children:"sales_report"})]}),"\n",(0,r.jsx)(e.li,{children:"避免使用数字开头或特殊字符"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"2-页面组织",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#2-页面组织",children:"#"}),"2. 页面组织"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"按功能模块组织页面"}),"\n",(0,r.jsx)(e.li,{children:"使用统一的设计风格"}),"\n",(0,r.jsx)(e.li,{children:"合理使用组件层次结构"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"3-性能优化",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#3-性能优化",children:"#"}),"3. 性能优化"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"避免在单个页面中加载过多数据"}),"\n",(0,r.jsx)(e.li,{children:"合理使用分页和懒加载"}),"\n",(0,r.jsx)(e.li,{children:"定期清理不再使用的页面"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"4-维护管理",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#4-维护管理",children:"#"}),"4. 维护管理"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"为页面添加清晰的标题和描述"}),"\n",(0,r.jsx)(e.li,{children:"定期备份重要页面配置"}),"\n",(0,r.jsx)(e.li,{children:"建立页面变更记录机制"}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"注意事项",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#注意事项",children:"#"}),"注意事项"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"页面标识唯一性"}),"：确保每个页面标识在系统中是唯一的"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"数据安全"}),"：在页面中展示敏感数据时要注意权限控制"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"兼容性"}),"：页面结构应该兼容不同的屏幕尺寸和设备"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"备份恢复"}),"：重要页面应该定期备份，避免意外丢失"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"通过动态页面功能，您可以快速构建功能丰富的管理界面，大大提高开发效率和系统的可维护性。"})]})}function h(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(d,n)})):d(n)}let l=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["guide%2Fbuilt-in%2Fpages.md"]={toc:[{id:"核心概念",text:"核心概念",depth:2},{id:"页面标识-sign",text:"页面标识 (Sign)",depth:3},{id:"页面结构-schema",text:"页面结构 (Schema)",depth:3},{id:"创建动态页面",text:"创建动态页面",depth:2},{id:"1-通过开发工具创建",text:"1. 通过开发工具创建",depth:3},{id:"2-页面编辑器功能",text:"2. 页面编辑器功能",depth:3},{id:"使用动态页面",text:"使用动态页面",depth:2},{id:"方法一通过admin_pages-函数调用",text:"方法一：通过`admin_pages()` 函数调用",depth:3},{id:"方法二直接绑定到菜单",text:"方法二：直接绑定到菜单",depth:3},{id:"方法三在现有页面中嵌入",text:"方法三：在现有页面中嵌入",depth:3},{id:"高级特性",text:"高级特性",depth:2},{id:"缓存机制",text:"缓存机制",depth:3},{id:"权限控制",text:"权限控制",depth:3},{id:"数据绑定",text:"数据绑定",depth:3},{id:"最佳实践",text:"最佳实践",depth:2},{id:"1-命名规范",text:"1. 命名规范",depth:3},{id:"2-页面组织",text:"2. 页面组织",depth:3},{id:"3-性能优化",text:"3. 性能优化",depth:3},{id:"4-维护管理",text:"4. 维护管理",depth:3},{id:"注意事项",text:"注意事项",depth:2}],title:"动态页面",frontmatter:{}}}}]);