"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["6504"],{9517:function(e,n,s){s.r(n),s.d(n,{default:function(){return l}});var r=s(2676),d=s(453);function i(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",pre:"pre",code:"code",strong:"strong",ul:"ul",li:"li",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ol:"ol"},(0,d.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"模块使用指南",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模块使用指南",children:"#"}),"模块使用指南"]}),"\n",(0,r.jsxs)(n.h2,{id:"创建模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建模块",children:"#"}),"创建模块"]}),"\n",(0,r.jsx)(n.p,{children:"使用 Artisan 命令快速创建模块，该命令会自动生成完整的模块结构、数据库表和基础数据。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",meta:"",children:"php artisan admin-module:init <模块名>\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"命令特性："})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["支持同时创建多个模块：",(0,r.jsx)(n.code,{children:"php artisan admin-module:init Master Store"})]}),"\n",(0,r.jsxs)(n.li,{children:["模块名建议使用大驼峰命名（如：",(0,r.jsx)(n.code,{children:"Master"}),"、",(0,r.jsx)(n.code,{children:"UserCenter"}),"）"]}),"\n",(0,r.jsx)(n.li,{children:"自动创建独立的数据库表（以模块名为前缀）"}),"\n",(0,r.jsx)(n.li,{children:"生成完整的 MVC 结构和配置文件"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"示例："})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",meta:"",children:"# 创建单个模块\nphp artisan admin-module:init Master\n\n# 创建多个模块\nphp artisan admin-module:init Master Store UserCenter\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"配置模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置模块",children:"#"}),"配置模块"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-启用模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-启用模块",children:"#"}),"1. 启用模块"]}),"\n",(0,r.jsxs)(n.p,{children:["在 ",(0,r.jsx)(n.code,{children:"config/admin.php"})," 中配置模块启用状态："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",meta:"",children:"'modules' => [\n    'Master' => true,     // 启用 Master 模块\n    'Store' => false,     // 禁用 Store 模块\n    'UserCenter' => true, // 启用 UserCenter 模块\n]\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"2-配置自动加载",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-配置自动加载",children:"#"}),"2. 配置自动加载"]}),"\n",(0,r.jsxs)(n.p,{children:["在项目根目录的 ",(0,r.jsx)(n.code,{children:"composer.json"})," 中添加模块命名空间："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:"",children:'{\n    "autoload": {\n        "psr-4": {\n            "App\\\\": "app/",\n            "AdminModules\\\\": "admin-modules/"\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"更新自动加载文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",meta:"",children:"composer dump-autoload\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"3-访问模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-访问模块",children:"#"}),"3. 访问模块"]}),"\n",(0,r.jsx)(n.p,{children:"模块创建完成后，可通过对应的路由前缀访问："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Master 模块：",(0,r.jsx)(n.code,{children:"/master-api"})]}),"\n",(0,r.jsxs)(n.li,{children:["Store 模块：",(0,r.jsx)(n.code,{children:"/store-api"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"模块结构",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模块结构",children:"#"}),"模块结构"]}),"\n",(0,r.jsx)(n.p,{children:"创建模块后，系统会在项目根目录生成标准的模块目录结构："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{meta:"",children:"admin-modules/                         # 模块根目录\n└── Master/                           # 模块名目录\n    ├── Controllers/                  # 控制器目录\n    │   ├── AuthController.php       # 认证控制器\n    │   ├── HomeController.php       # 首页控制器\n    │   └── SettingController.php    # 设置控制器\n    ├── Models/                      # 模型目录\n    │   ├── AdminUser.php           # 管理员模型\n    │   ├── AdminRole.php           # 角色模型\n    │   ├── AdminMenu.php           # 菜单模型\n    │   └── AdminPermission.php     # 权限模型\n    ├── Services/                   # 服务层目录（可扩展）\n    ├── bootstrap.php              # 模块引导文件\n    ├── config.php                 # 模块配置文件\n    ├── routes.php                 # 模块路由文件\n    └── MasterServiceProvider.php  # 服务提供者\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"核心文件说明",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心文件说明",children:"#"}),"核心文件说明"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"文件"}),(0,r.jsx)(n.th,{children:"功能描述"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bootstrap.php"})}),(0,r.jsx)(n.td,{children:"模块引导文件，用于注册菜单、导航等初始化操作"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"config.php"})}),(0,r.jsx)(n.td,{children:"模块配置文件，包含路由、认证、上传等配置"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"routes.php"})}),(0,r.jsx)(n.td,{children:"模块路由定义文件"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ServiceProvider.php"})}),(0,r.jsx)(n.td,{children:"服务提供者，处理模块的高级注册逻辑"})]})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"数据库管理",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据库管理",children:"#"}),"数据库管理"]}),"\n",(0,r.jsxs)(n.h3,{id:"自动创建表结构",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自动创建表结构",children:"#"}),"自动创建表结构"]}),"\n",(0,r.jsx)(n.p,{children:"模块初始化时会自动创建以下数据表："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_users"})," - 管理员表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_roles"})," - 角色表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_menus"})," - 菜单表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_permissions"})," - 权限表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_role_users"})," - 角色用户关联表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_role_permissions"})," - 角色权限关联表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{模块名}_admin_role_menus"})," - 角色菜单关联表"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"独立初始化数据库",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#独立初始化数据库",children:"#"}),"独立初始化数据库"]}),"\n",(0,r.jsx)(n.p,{children:"如需单独初始化模块数据库（不创建文件结构）："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",meta:"",children:"php artisan admin-module:init-db <模块名>\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"模块特性",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模块特性",children:"#"}),"模块特性"]}),"\n",(0,r.jsxs)(n.h3,{id:"独立性",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#独立性",children:"#"}),"独立性"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"数据隔离"}),"：每个模块拥有独立的数据表和用户体系"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"配置隔离"}),"：独立的认证守卫和配置文件"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"路由隔离"}),"：通过不同的路由前缀区分模块"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"共享资源",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#共享资源",children:"#"}),"共享资源"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"前端资源"}),"：所有模块共享同一套前端界面和组件"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"开发工具"}),"：代码生成器和扩展功能在所有模块中通用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"核心功能"}),"：基础的 CRUD 操作和权限管理逻辑复用"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"模块管理",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模块管理",children:"#"}),"模块管理"]}),"\n",(0,r.jsxs)(n.h3,{id:"启用禁用模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#启用禁用模块",children:"#"}),"启用/禁用模块"]}),"\n",(0,r.jsx)(n.p,{children:"通过配置文件控制模块状态："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",meta:"",children:"// config/admin.php\n'modules' => [\n    'Master' => true,  // 启用\n    'Store' => false,  // 禁用\n]\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"移除模块",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#移除模块",children:"#"}),"移除模块"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"注意：移除操作不可逆，请谨慎操作"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"删除模块文件"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",meta:"",children:"rm -rf admin-modules/ModuleName\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"删除数据库表"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",meta:"",children:"-- 删除所有以模块名为前缀的表\nDROP TABLE module_name_admin_users;\nDROP TABLE module_name_admin_roles;\n-- ... 其他相关表\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"更新配置文件"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",meta:"",children:"// 从 config/admin.php 中移除模块配置\n'modules' => [\n    // 'ModuleName' => true, // 删除此行\n]\n"})}),"\n"]}),"\n"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(i,e)})):i(e)}let l=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["guide%2Fmodules%2Fuse.md"]={toc:[{id:"创建模块",text:"创建模块",depth:2},{id:"配置模块",text:"配置模块",depth:2},{id:"1-启用模块",text:"1. 启用模块",depth:3},{id:"2-配置自动加载",text:"2. 配置自动加载",depth:3},{id:"3-访问模块",text:"3. 访问模块",depth:3},{id:"模块结构",text:"模块结构",depth:2},{id:"核心文件说明",text:"核心文件说明",depth:3},{id:"数据库管理",text:"数据库管理",depth:2},{id:"自动创建表结构",text:"自动创建表结构",depth:3},{id:"独立初始化数据库",text:"独立初始化数据库",depth:3},{id:"模块特性",text:"模块特性",depth:2},{id:"独立性",text:"独立性",depth:3},{id:"共享资源",text:"共享资源",depth:3},{id:"模块管理",text:"模块管理",depth:2},{id:"启用禁用模块",text:"启用/禁用模块",depth:3},{id:"移除模块",text:"移除模块",depth:3}],title:"模块使用指南",frontmatter:{}}}}]);