"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["8098"],{4882:function(e,n,s){s.r(n),s.d(n,{default:function(){return l}});var r=s(2676),i=s(453);function t(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",ul:"ul",li:"li",code:"code",pre:"pre"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"删",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#删",children:"#"}),"删"]}),"\n",(0,r.jsxs)(n.h2,{id:"删除按钮",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#删除按钮",children:"#"}),"删除按钮"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["控制器中的 ",(0,r.jsx)(n.code,{children:"list"})," 方法负责构建数据列表"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",meta:"",children:"public function list()\n{\n    $crud = $this->baseCRUD()\n        // 配置 CRUD 组件的批量操作\n        ->bulkActions([\n            $this->bulkDeleteButton() // 批量删除按钮\n            // 批量删除按钮会携带选中的主键字段, 发起 ajax 请求, 实现删除功能\n        ])\n        ->columns([\n            amis()->TableColumn()->label('ID')->name('id')->sortable(),\n            // ...\n            \n            // 这里是列表的行内操作按钮\n            $this->rowActions([\n                $this->rowEditButton(true), // 编辑按钮\n                $this->rowDeleteButton(), // 删除按钮\n                // 删除按钮会携带主键字段, 发起 ajax 请求, 实现删除功能\n            ]),\n        ]);\n\n    return $this->baseList($crud);\n}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"删除逻辑",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#删除逻辑",children:"#"}),"删除逻辑"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["通过列表上的操作按钮, 请求到 ",(0,r.jsx)(n.code,{children:"AdminController"})," 中的 ",(0,r.jsx)(n.code,{children:"destroy"})," 方法, 实现删除功能"]}),"\n",(0,r.jsxs)(n.li,{children:["如果有自定义删除逻辑的需求, 可以在对应的 ",(0,r.jsx)(n.code,{children:"service"})," 中, 重写 ",(0,r.jsx)(n.code,{children:"delete"})," 方法"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",meta:"",children:"/**\n * 删除\n *\n * @param $ids\n *\n * @return JsonResponse|JsonResource\n */\npublic function destroy($ids)\n{\n    $rows = $this->service->delete($ids);\n\n    return $this->autoResponse($rows, __('admin.delete'));\n}\n\n/**\n * service 中实际处理删除逻辑的方法, 可以在自己的 service 中重写该方法\n *\n * @param string $ids\n *\n * @return mixed\n */\npublic function delete(string $ids): mixed\n{\n    return $this->query()->whereIn($this->primaryKey(), explode(',', $ids))->delete();\n}\n"})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}let l=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["guide%2Fcrud%2Fdelete.md"]={toc:[{id:"删除按钮",text:"删除按钮",depth:2},{id:"删除逻辑",text:"删除逻辑",depth:2}],title:"删",frontmatter:{}}}}]);